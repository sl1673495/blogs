{"componentChunkName":"component---src-templates-blog-post-js","path":"/819971559/","result":{"data":{"site":{"siteMetadata":{"title":"sshçš„åšå®¢","author":"ssh"}},"markdownRemark":{"id":"1d54feca-9102-5387-a78c-64a09d32a795","html":"<h2 id=\"å‰è¨€\"><a href=\"#%E5%89%8D%E8%A8%80\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>å‰è¨€</h2>\n<p>æœ€è¿‘åœ¨ä¸€ä¸ªä¸šåŠ¡éœ€æ±‚ä¸­ï¼Œæˆ‘é€šè¿‡åœ¨ Antd Table æä¾›çš„å›è°ƒå‡½æ•°ç­‰æœºåˆ¶ä¸­ç¼–å†™ä»£ç ï¼Œå®ç°äº†è¿™äº›åŠŸèƒ½ï¼š</p>\n<ul>\n<li>âœ¨ æ¯ä¸ªå±‚çº§<strong>ç¼©è¿›æŒ‡ç¤ºçº¿</strong></li>\n<li>âœ¨ è¿œç¨‹<strong>æ‡’åŠ è½½</strong>å­èŠ‚ç‚¹</li>\n<li>âœ¨ æ¯ä¸ªå±‚çº§æ”¯æŒ<strong>åˆ†é¡µ</strong></li>\n</ul>\n<p>æœ€åå®ç°çš„æ•ˆæœå¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p>\n<p><img src=\"https://images.gitee.com/uploads/images/2021/0301/181948_efc006a8_1087321.gif\" alt=\"æœ€ç»ˆæ•ˆæœ\" title=\"Kapture 2021-03-01 at 18.19.38.gif\"></p>\n<p>åŠŸèƒ½è™½ç„¶å·²ç»å®ç°äº†ï¼Œä¹Ÿè®°å½•åœ¨äº† <a href=\"https://github.com/sl1673495/blogs/issues/77\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ç»™ Antd Table ç»„ä»¶ç¼–å†™ç¼©è¿›æŒ‡å¼•çº¿ã€å­èŠ‚ç‚¹æ‡’åŠ è½½ç­‰åŠŸèƒ½</a> è¿™ç¯‡æ–‡ç« ä¸­ã€‚ä¸è¿‡æˆ‘ä¸ªäººæ„Ÿè§‰æ„ä¹‰ä¸å¤§ï¼Œå¯¹åŠŸèƒ½ä»£ç ä¸æ„Ÿå…´è¶£çš„åŒå­¦å®Œå…¨å¯ä»¥è·³è¿‡ã€‚</p>\n<p>è¿™ç¯‡æ–‡ç« æˆ‘æƒ³èŠèŠæˆ‘åœ¨è¿™ä¸ªéœ€æ±‚ä¸­ï¼Œå¯¹<strong>ä»£ç è§£è€¦</strong>ï¼Œä¸ºç»„ä»¶ç¼–å†™<strong>æ’ä»¶æœºåˆ¶</strong>çš„ä¸€äº›æ€è€ƒã€‚</p>\n<p>ä»£ç å·²ç»å‘å¸ƒåœ¨ <a href=\"https://github.com/sl1673495/react-antd-treetable\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">react-antd-treetable</a>ï¼Œæ¬¢è¿ Star~</p>\n<h2 id=\"é‡æ„æ€è·¯\"><a href=\"#%E9%87%8D%E6%9E%84%E6%80%9D%E8%B7%AF\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>é‡æ„æ€è·¯</h2>\n<p>éšç€ç¼–å†™åŠŸèƒ½çš„å¢å¤šï¼Œé€»è¾‘è¢«è€¦åˆåœ¨ Antd Table çš„å„ä¸ªå›è°ƒå‡½æ•°ä¹‹ä¸­ï¼Œ</p>\n<ul>\n<li><strong>æŒ‡å¼•çº¿</strong>çš„é€»è¾‘åˆ†æ•£åœ¨ <code class=\"language-text\">rewriteColumns</code>, <code class=\"language-text\">components</code>ä¸­ã€‚</li>\n<li><strong>åˆ†é¡µ</strong>çš„é€»è¾‘è¢«åˆ†æ•£åœ¨ <code class=\"language-text\">rewriteColumns</code> å’Œ <code class=\"language-text\">rewriteTree</code> ä¸­ã€‚</li>\n<li><strong>åŠ è½½æ›´å¤š</strong>çš„é€»è¾‘è¢«åˆ†æ•£åœ¨ <code class=\"language-text\">rewriteTree</code> å’Œ <code class=\"language-text\">onExpand</code> ä¸­</li>\n</ul>\n<p>è‡³æ­¤ï¼Œç»„ä»¶çš„ä»£ç è¡Œæ•°ä¹Ÿå·²ç»æ¥åˆ°äº† <code class=\"language-text\">300</code> è¡Œï¼Œå¤§æ¦‚çœ‹ä¸€ä¸‹ä»£ç çš„ç»“æ„ï¼Œå·²ç»æ˜¯æ¯”è¾ƒæ··ä¹±äº†ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">TreeTable</span> <span class=\"token operator\">=</span> rawProps <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">rewriteTree</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ğŸˆåŠ è½½æ›´å¤šé€»è¾‘</span>\n    <span class=\"token comment\">// ğŸ”– åˆ†é¡µé€»è¾‘</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">rewriteColumns</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ğŸ”– åˆ†é¡µé€»è¾‘</span>\n    <span class=\"token comment\">// ğŸ ç¼©è¿›çº¿é€»è¾‘</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> components <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ğŸ ç¼©è¿›çº¿é€»è¾‘</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> onExpand <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>expanded<span class=\"token punctuation\">,</span> record<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ğŸˆ åŠ è½½æ›´å¤šé€»è¾‘</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>Table <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>è¿™æ—¶å€™ç¼ºç‚¹å°±æš´éœ²å‡ºæ¥äº†ï¼Œå½“æˆ‘æƒ³è¦æ”¹åŠ¨æˆ–è€…åˆ å‡å…¶ä¸­ä¸€ä¸ªåŠŸèƒ½çš„æ—¶å€™å˜å¾—å¼‚å¸¸ç—›è‹¦ï¼Œç»å¸¸åœ¨å„ä¸ªå‡½æ•°ä¹‹é—´è·³è½¬æŸ¥æ‰¾ã€‚</p>\n<p>æœ‰æ²¡æœ‰ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥è®©ä»£ç <strong>æŒ‰ç…§åŠŸèƒ½ç‚¹èšåˆ</strong>ï¼Œè€Œä¸æ˜¯æ•£è½åœ¨å„ä¸ªå‡½æ•°ä¸­ï¼Ÿ</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// ğŸ”– åˆ†é¡µé€»è¾‘</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">usePaginationPlugin</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ğŸˆ åŠ è½½æ›´å¤šé€»è¾‘</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useLazyloadPlugin</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ğŸ ç¼©è¿›çº¿é€»è¾‘</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useIndentLinePlugin</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">TreeTable</span> <span class=\"token operator\">=</span> rawProps <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">usePaginationPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useLazyloadPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useIndentLinePlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>Table <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>æ²¡é”™ï¼Œå°±æ˜¯å¾ˆåƒ <code class=\"language-text\">VueCompositionAPI</code> å’Œ <code class=\"language-text\">React Hook</code> åœ¨é€»è¾‘è§£è€¦æ–¹é¢æ‰€åšçš„æ”¹è¿›ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªå›è°ƒå‡½æ•°çš„å†™æ³•å½¢æ€ä¸‹ï¼Œå¥½åƒä¸å¤ªå®¹æ˜“åšåˆ°ï¼Ÿ</p>\n<p>è¿™æ—¶å€™ï¼Œæˆ‘å›æƒ³åˆ°ç¤¾åŒºä¸­ä¸€äº›å¼€æºæ¡†æ¶æä¾›çš„<strong>æ’ä»¶æœºåˆ¶</strong>ï¼Œå¥½åƒå°±å¯ä»¥åœ¨<strong>ä¸æ·±å…¥æºç </strong>çš„æƒ…å†µä¸‹æ³¨å…¥å„ä¸ª<strong>å›è°ƒæ—¶æœº</strong>çš„ç”¨æˆ·é€»è¾‘ã€‚</p>\n<p>æ¯”å¦‚ <a href=\"https://cn.vitejs.dev/guide/api-plugin.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Vite çš„æ’ä»¶</a>ã€<a href=\"https://webpack.docschina.org/concepts/plugins/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Webpack çš„æ’ä»¶</a> ç”šè‡³å¤§å®¶å¾ˆç†Ÿæ‚‰çš„ <a href=\"https://cn.vuejs.org/v2/api/#Vue-use\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Vue.use()</a>ï¼Œå®ƒä»¬æœ¬è´¨ä¸Šå°±æ˜¯å¯¹å¤–æš´éœ²å‡ºä¸€äº›å†…éƒ¨çš„æ—¶æœºå’Œå±æ€§ï¼Œè®©ç”¨æˆ·å»å†™ä¸€äº›ä»£ç æ¥ä»‹å…¥æ¡†æ¶è¿è¡Œçš„å„ä¸ªæ—¶æœºä¹‹ä¸­ã€‚</p>\n<p>é‚£ä¹ˆï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥è€ƒè™‘æŠŠã€Œå¤„ç†æ¯ä¸ªèŠ‚ç‚¹ã€<code class=\"language-text\">column</code>ã€æ¯æ¬¡ <code class=\"language-text\">onExpand</code>ã€ çš„æ—¶æœºæš´éœ²å‡ºå»ï¼Œè¿™æ ·è®©ç”¨æˆ·ä¹Ÿå¯ä»¥<strong>ä»‹å…¥è¿™äº›æµç¨‹</strong>ï¼Œå»æ”¹å†™ä¸€äº›å±æ€§ï¼Œè°ƒç”¨ä¸€äº›å†…éƒ¨æ–¹æ³•ï¼Œä»¥æ­¤å®ç°ä¸Šé¢çš„å‡ ä¸ªåŠŸèƒ½å‘¢ï¼Ÿ</p>\n<p>æˆ‘ä»¬è®¾è®¡æ’ä»¶æœºåˆ¶ï¼Œæƒ³è¦å®ç°è¿™ä¸¤ä¸ªç›®æ ‡ï¼š</p>\n<ol>\n<li><strong>é€»è¾‘è§£è€¦</strong>ï¼ŒæŠŠæ¯ä¸ªå°åŠŸèƒ½çš„ä»£ç <strong>æ•´åˆ</strong>åˆ°æ’ä»¶æ–‡ä»¶ä¸­å»ï¼Œä¸å’Œç»„ä»¶è€¦åˆèµ·æ¥ï¼Œå¢åŠ å¯ç»´æŠ¤æ€§ã€‚</li>\n<li><strong>ç”¨æˆ·å…±å»º</strong>ï¼Œå†…éƒ¨ä½¿ç”¨çš„è¯æ–¹ä¾¿<strong>åŒäº‹</strong>å…±å»ºï¼Œå¼€æºåæ–¹ä¾¿<strong>ç¤¾åŒº</strong>å…±å»ºï¼Œå½“ç„¶è¿™è¦æ±‚ä½ ç¼–å†™çš„æ’ä»¶æœºåˆ¶è¶³å¤Ÿå®Œå–„ï¼Œæ–‡æ¡£è¶³å¤Ÿå‹å¥½ã€‚</li>\n</ol>\n<p>ä¸è¿‡æ’ä»¶ä¹Ÿä¼šå¸¦æ¥ä¸€äº›ç¼ºç‚¹ï¼Œè®¾è®¡ä¸€å¥—å®Œå–„çš„æ’ä»¶æœºåˆ¶ä¹Ÿæ˜¯éå¸¸å¤æ‚çš„ï¼Œåƒ Webpackã€Rollupã€Redux çš„æ’ä»¶æœºåˆ¶éƒ½æœ‰è®¾è®¡çš„éå¸¸ç²¾è‰¯çš„åœ°æ–¹å¯ä»¥å‚è€ƒå­¦ä¹ ã€‚</p>\n<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šè¯•ç€å®ç°çš„ä¸€ä¸ª<strong>æœ€ç®€åŒ–ç‰ˆ</strong>çš„æ’ä»¶ç³»ç»Ÿã€‚</p>\n<h2 id=\"æºç \"><a href=\"#%E6%BA%90%E7%A0%81\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>æºç </h2>\n<p>é¦–å…ˆï¼Œè®¾è®¡ä¸€ä¸‹æ’ä»¶çš„æ¥å£ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">TreeTablePlugin</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">:</span> ResolvedProps<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">:</span> TreeTablePluginContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * å¯ä»¥è®¿é—®åˆ°æ¯ä¸€ä¸ª column å¹¶ä¿®æ”¹\n     */</span>\n    onColumn<span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>column<span class=\"token punctuation\">:</span> ColumnProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">/**\n     * å¯ä»¥è®¿é—®åˆ°æ¯ä¸€ä¸ªèŠ‚ç‚¹æ•°æ®\n     * åœ¨åˆå§‹åŒ–æˆ–è€…æ–°å¢å­èŠ‚ç‚¹ä»¥åéƒ½ä¼šæ‰§è¡Œ\n     */</span>\n    onRecord<span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>record<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">/**\n     * èŠ‚ç‚¹å±•å¼€çš„å›è°ƒå‡½æ•°\n     */</span>\n    onExpand<span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>expanded<span class=\"token punctuation\">,</span> record<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">/**\n     * è‡ªå®šä¹‰ Table ç»„ä»¶\n     */</span>\n    components<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> TableProps<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">[</span><span class=\"token string\">'components'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">TreeTablePluginContext</span> <span class=\"token punctuation\">{</span>\n  forceUpdate<span class=\"token punctuation\">:</span> React<span class=\"token punctuation\">.</span>DispatchWithoutAction<span class=\"token punctuation\">;</span>\n  <span class=\"token function\">replaceChildList</span><span class=\"token punctuation\">(</span>record<span class=\"token punctuation\">,</span> childList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  expandedRowKeys<span class=\"token punctuation\">:</span> TableProps<span class=\"token operator\">&lt;</span><span class=\"token builtin\">any</span><span class=\"token operator\">></span><span class=\"token punctuation\">[</span><span class=\"token string\">'expandedRowKeys'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  setExpandedRowKeys<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">|</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">|</span> undefined<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>æˆ‘æŠŠæ’ä»¶è®¾è®¡æˆä¸€ä¸ª<strong>å‡½æ•°</strong>ï¼Œè¿™æ ·æ¯æ¬¡æ‰§è¡Œéƒ½å¯ä»¥æ‹¿åˆ°æœ€æ–°çš„ <code class=\"language-text\">props</code> å’Œ <code class=\"language-text\">context</code>ã€‚</p>\n<p><code class=\"language-text\">context</code> å…¶å®å°±æ˜¯ç»„ä»¶å†…ä¸€äº›ä¾èµ–ä¸Šä¸‹æ–‡çš„å·¥å…·å‡½æ•°ç­‰ç­‰ï¼Œæ¯”å¦‚ <code class=\"language-text\">forceUpdate</code>, <code class=\"language-text\">replaceChildList</code> ç­‰å‡½æ•°éƒ½å¯ä»¥æŒ‚åœ¨ä¸Šé¢ã€‚</p>\n<p>æ¥ä¸‹æ¥ï¼Œç”±äºæ’ä»¶å¯èƒ½æœ‰å¤šä¸ªï¼Œè€Œä¸”å†…éƒ¨å¯èƒ½ä¼šæœ‰ä¸€äº›è§£ææµç¨‹ï¼Œæ‰€ä»¥æˆ‘è®¾è®¡ä¸€ä¸ªè¿è¡Œæ’ä»¶çš„ hook å‡½æ•° <code class=\"language-text\">usePluginContainer</code>ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">usePluginContainer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  props<span class=\"token punctuation\">:</span> ResolvedProps<span class=\"token punctuation\">,</span>\n  context<span class=\"token punctuation\">:</span> TreeTablePluginContext\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> plugins<span class=\"token punctuation\">:</span> rawPlugins <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> plugins <span class=\"token operator\">=</span> rawPlugins<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>usePlugin <span class=\"token operator\">=></span> usePlugin<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> container <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">onColumn</span><span class=\"token punctuation\">(</span>column<span class=\"token punctuation\">:</span> ColumnProps<span class=\"token operator\">&lt;</span><span class=\"token builtin\">any</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> plugin <span class=\"token keyword\">of</span> plugins<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        plugin<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>onColumn<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>column<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">onRecord</span><span class=\"token punctuation\">(</span>record<span class=\"token punctuation\">,</span> parentRecord<span class=\"token punctuation\">,</span> level<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> plugin <span class=\"token keyword\">of</span> plugins<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        plugin<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>onRecord<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>record<span class=\"token punctuation\">,</span> parentRecord<span class=\"token punctuation\">,</span> level<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">onExpand</span><span class=\"token punctuation\">(</span>expanded<span class=\"token punctuation\">,</span> record<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> plugin <span class=\"token keyword\">of</span> plugins<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        plugin<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>onExpand<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span>expanded<span class=\"token punctuation\">,</span> record<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/**\n     * æš‚æ—¶åªåš components çš„ deepmerge\n     * ä¸å¤„ç†è‡ªå®šä¹‰ç»„ä»¶çš„å†²çª åå®šä¹‰çš„ Cell ä¼šè¦†ç›–å‰è€…\n     */</span>\n    <span class=\"token function\">mergeComponents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">let</span> components<span class=\"token punctuation\">:</span> TableProps<span class=\"token operator\">&lt;</span><span class=\"token builtin\">any</span><span class=\"token operator\">></span><span class=\"token punctuation\">[</span><span class=\"token string\">'components'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>components <span class=\"token operator\">||</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> plugin <span class=\"token keyword\">of</span> plugins<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        components <span class=\"token operator\">=</span> deepmerge<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>components<span class=\"token punctuation\">,</span> plugin<span class=\"token punctuation\">.</span>components <span class=\"token operator\">||</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> components<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> container<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ç›®å‰çš„æµç¨‹å¾ˆç®€å•ï¼Œåªæ˜¯æŠŠæ¯ä¸ª <code class=\"language-text\">plugin</code> å‡½æ•°è°ƒç”¨ä¸€ä¸‹ï¼Œç„¶åæä¾›å¯¹å¤–çš„åŒ…è£…æ¥å£ã€‚<code class=\"language-text\">mergeComponent</code> ä½¿ç”¨<a href=\"https://github.com/TehShrike/deepmerge\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">deepmerge</a> è¿™ä¸ªåº“æ¥åˆå¹¶ç”¨æˆ·ä¼ å…¥çš„ <code class=\"language-text\">components</code> å’Œ æ’ä»¶ä¸­çš„ <code class=\"language-text\">components</code>ï¼Œæš‚æ—¶ä¸åšå†²çªå¤„ç†ã€‚</p>\n<p>æ¥ç€å°±å¯ä»¥åœ¨ç»„ä»¶ä¸­è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œç”Ÿæˆ <code class=\"language-text\">pluginContainer</code>ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> TreeTable <span class=\"token operator\">=</span>  React<span class=\"token punctuation\">.</span><span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>propsï¼Œ ref<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>_<span class=\"token punctuation\">,</span> forceUpdate<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> x <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>expandedRowKeys<span class=\"token punctuation\">,</span> setExpandedRowKeys<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> useState<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> pluginContext <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    forceUpdate<span class=\"token punctuation\">,</span>\n    replaceChildList<span class=\"token punctuation\">,</span>\n    expandedRowKeys<span class=\"token punctuation\">,</span>\n    setExpandedRowKeys\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// å¯¹å¤–æš´éœ²å·¥å…·æ–¹æ³•ç»™ç”¨æˆ·ä½¿ç”¨</span>\n  <span class=\"token function\">useImperativeHandle</span><span class=\"token punctuation\">(</span>ref<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    replaceChildList<span class=\"token punctuation\">,</span>\n    setNodeLoading<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// è¿™é‡Œæ‹¿åˆ°äº† pluginContainer</span>\n  <span class=\"token keyword\">const</span> pluginContainer <span class=\"token operator\">=</span> <span class=\"token function\">usePluginContainer</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>props<span class=\"token punctuation\">,</span>\n      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token operator\">...</span>props<span class=\"token punctuation\">.</span>plugins<span class=\"token punctuation\">,</span>\n        usePaginationPlugin<span class=\"token punctuation\">,</span>\n        useLazyloadPlugin<span class=\"token punctuation\">,</span>\n        useIndentLinePlugin<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    pluginContext\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ä¹‹åï¼Œåœ¨å„ä¸ªæµç¨‹çš„ç›¸åº”ä½ç½®ï¼Œéƒ½é€šè¿‡ <code class=\"language-text\">pluginContainer</code> æ‰§è¡Œç›¸åº”çš„é’©å­å‡½æ•°å³å¯ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> TreeTable <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">,</span> ref<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// çœç•¥ä¸Šä¸€éƒ¨åˆ†ä»£ç â€¦â€¦</span>\n\n  <span class=\"token comment\">// è¿™é‡Œæ‹¿åˆ°äº† pluginContainer</span>\n  <span class=\"token keyword\">const</span> pluginContainer <span class=\"token operator\">=</span> <span class=\"token function\">usePluginContainer</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>props<span class=\"token punctuation\">,</span>\n      plugins<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token operator\">...</span>props<span class=\"token punctuation\">.</span>plugins<span class=\"token punctuation\">,</span>\n        usePaginationPlugin<span class=\"token punctuation\">,</span>\n        useLazyloadPlugin<span class=\"token punctuation\">,</span>\n        useIndentLinePlugin<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    pluginContext\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// é€’å½’éå†æ•´ä¸ªæ•°æ® è°ƒç”¨é’©å­</span>\n  <span class=\"token keyword\">const</span> rewriteTree <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    dataSource<span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// åœ¨åŠ¨æ€è¿½åŠ å­æ ‘èŠ‚ç‚¹çš„æ—¶å€™ éœ€è¦æ‰‹åŠ¨ä¼ å…¥ parent å¼•ç”¨</span>\n    parentNode <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    pluginContainer<span class=\"token punctuation\">.</span><span class=\"token function\">onRecord</span><span class=\"token punctuation\">(</span>parentNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">traverseTree</span><span class=\"token punctuation\">(</span>dataSource<span class=\"token punctuation\">,</span> childrenColumnName<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">,</span> parent<span class=\"token punctuation\">,</span> level<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// è¿™é‡Œæ‰§è¡Œæ’ä»¶çš„ onRecord é’©å­</span>\n      pluginContainer<span class=\"token punctuation\">.</span><span class=\"token function\">onRecord</span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">,</span> parent<span class=\"token punctuation\">,</span> level<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> rewrittenColumns <span class=\"token operator\">=</span> columns<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>rawColumn <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//  è¿™é‡ŒæŠŠæµ…æ‹·è´è¿‡åçš„ column æš´éœ²å‡ºå»</span>\n    <span class=\"token comment\">//  é˜²æ­¢æ±¡æŸ“åŸå§‹å€¼</span>\n    <span class=\"token keyword\">const</span> column <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> rawColumn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    pluginContainer<span class=\"token punctuation\">.</span><span class=\"token function\">onColumn</span><span class=\"token punctuation\">(</span>column<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> column<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> onExpand <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>expanded<span class=\"token punctuation\">,</span> record<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// è¿™é‡Œæ‰§è¡Œæ’ä»¶çš„ onExpand é’©å­</span>\n    pluginContainer<span class=\"token punctuation\">.</span><span class=\"token function\">onExpand</span><span class=\"token punctuation\">(</span>expanded<span class=\"token punctuation\">,</span> record<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// è¿™é‡Œè·å–åˆå¹¶åçš„ components ä¼ é€’ç»™ Table</span>\n  <span class=\"token keyword\">const</span> components <span class=\"token operator\">=</span> pluginContainer<span class=\"token punctuation\">.</span><span class=\"token function\">mergeComponents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠä¹‹å‰<strong>åˆ†é¡µç›¸å…³</strong>çš„é€»è¾‘ç›´æ¥æŠ½è±¡æˆ <code class=\"language-text\">usePaginationPlugin</code>ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> usePaginationPlugin<span class=\"token punctuation\">:</span> <span class=\"token function-variable function\">TreeTablePlugin</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  props<span class=\"token punctuation\">:</span> ResolvedProps<span class=\"token punctuation\">,</span>\n  context<span class=\"token punctuation\">:</span> TreeTablePluginContext\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> forceUpdate<span class=\"token punctuation\">,</span> replaceChildList <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> context<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n    childrenPagination<span class=\"token punctuation\">,</span>\n    childrenColumnName<span class=\"token punctuation\">,</span>\n    rowKey<span class=\"token punctuation\">,</span>\n    indentLineDataIndex<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handlePagination</span> <span class=\"token operator\">=</span> node <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// å…ˆåŠ å…¥æ¸²æŸ“åˆ†é¡µå™¨å ä½èŠ‚ç‚¹</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">rewritePaginationRender</span> <span class=\"token operator\">=</span> column <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// æ”¹å†™ column çš„ render</span>\n    <span class=\"token comment\">// æ¸²æŸ“åˆ†é¡µå™¨</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    onRecord<span class=\"token punctuation\">:</span> handlePagination<span class=\"token punctuation\">,</span>\n    onColumn<span class=\"token punctuation\">:</span> rewritePaginationRender<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ä¹Ÿè®¸æœºæ™ºçš„ä½ å·²ç»å‘ç°ï¼Œè¿™é‡Œçš„æ’ä»¶æ˜¯ä»¥ <code class=\"language-text\">use</code> å¼€å¤´çš„ï¼Œè¿™æ˜¯<strong>è‡ªå®šä¹‰ hook</strong>çš„æ ‡å¿—ã€‚</p>\n<p>æ²¡é”™ï¼Œå®ƒæ—¢æ˜¯ä¸€ä¸ªæ’ä»¶ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ª <strong>è‡ªå®šä¹‰ Hook</strong>ã€‚æ‰€ä»¥ä½ å¯ä»¥ä½¿ç”¨ <strong>React Hook çš„ä¸€åˆ‡èƒ½åŠ›</strong>ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥åœ¨æ’ä»¶ä¸­å¼•å…¥å„ç§ç¤¾åŒºçš„ç¬¬ä¸‰æ–¹ Hook æ¥åŠ å¼ºèƒ½åŠ›ã€‚</p>\n<p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ˜¯åœ¨ <code class=\"language-text\">usePluginContainer</code> ä¸­é€šè¿‡å‡½æ•°è°ƒç”¨æ‰§è¡Œå„ä¸ª <code class=\"language-text\">usePlugin</code>ï¼Œå®Œå…¨ç¬¦åˆ React Hook çš„è°ƒç”¨è§„åˆ™ã€‚</p>\n<p>è€Œ<strong>æ‡’åŠ è½½èŠ‚ç‚¹</strong>ç›¸å…³çš„é€»è¾‘ä¹Ÿå¯ä»¥æŠ½è±¡æˆ <code class=\"language-text\">useLazyloadPlugin</code>ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> useLazyloadPlugin<span class=\"token punctuation\">:</span> <span class=\"token function-variable function\">TreeTablePlugin</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  props<span class=\"token punctuation\">:</span> ResolvedProps<span class=\"token punctuation\">,</span>\n  context<span class=\"token punctuation\">:</span> TreeTablePluginContext\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> childrenColumnName<span class=\"token punctuation\">,</span> rowKey<span class=\"token punctuation\">,</span> hasNextKey<span class=\"token punctuation\">,</span> onLoadMore <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> replaceChildList<span class=\"token punctuation\">,</span> expandedRowKeys<span class=\"token punctuation\">,</span> setExpandedRowKeys <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> context<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// å¤„ç†æ‡’åŠ è½½å ä½èŠ‚ç‚¹é€»è¾‘</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleNextLevelLoader</span> <span class=\"token operator\">=</span> node <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> onExpand <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>expanded<span class=\"token punctuation\">,</span> record<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>expanded <span class=\"token operator\">&amp;&amp;</span> record<span class=\"token punctuation\">[</span>hasNextKey<span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> onLoadMore<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// å¤„ç†æ‡’åŠ è½½é€»è¾‘</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    onRecord<span class=\"token punctuation\">:</span> handleNextLevelLoader<span class=\"token punctuation\">,</span>\n    onExpand<span class=\"token punctuation\">:</span> onExpand<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>è€Œç¼©è¿›çº¿ç›¸å…³çš„é€»è¾‘åˆ™æŠ½å–æˆ <code class=\"language-text\">useIndentLinePlugin</code>ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> useIndentLinePlugin<span class=\"token punctuation\">:</span> <span class=\"token function-variable function\">TreeTablePlugin</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  props<span class=\"token punctuation\">:</span> ResolvedProps<span class=\"token punctuation\">,</span>\n  context<span class=\"token punctuation\">:</span> TreeTablePluginContext\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> expandedRowKeys <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> context<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onColumn</span> <span class=\"token operator\">=</span> column <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    column<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCell</span> <span class=\"token operator\">=</span> record <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        record<span class=\"token punctuation\">,</span>\n        <span class=\"token operator\">...</span>column<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> components <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    body<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      cell<span class=\"token punctuation\">:</span> cellProps <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>IndentCell\n          <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>cellProps<span class=\"token punctuation\">}</span>\n          expandedRowKeys<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>expandedRowKeys<span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    components<span class=\"token punctuation\">,</span>\n    onColumn<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>è‡³æ­¤ï¼Œä¸»å‡½æ•°è¢«ç²¾ç®€åˆ° <code class=\"language-text\">150</code> è¡Œå·¦å³ï¼Œæ–°åŠŸèƒ½ç›¸å…³çš„å‡½æ•°å…¨éƒ¨è¢«ç§»åˆ°æ’ä»¶ç›®å½•ä¸­å»äº†ï¼Œæ— è®ºæ˜¯æƒ³è¦æ–°å¢æˆ–è€…åˆ å‡ã€å¼€å…³åŠŸèƒ½éƒ½å˜çš„éå¸¸å®¹æ˜“ã€‚</p>\n<p>æ­¤æ—¶çš„ç›®å½•ç»“æ„ï¼š</p>\n<p><img src=\"https://images.gitee.com/uploads/images/2021/0302/202947_5e9f5a4f_1087321.png\" alt=\"ç›®å½•ç»“æ„\" title=\"å±å¹•æˆªå›¾.png\"></p>\n<h2 id=\"æ€»ç»“\"><a href=\"#%E6%80%BB%E7%BB%93\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>æ€»ç»“</h2>\n<p>æœ¬ç³»åˆ—é€šè¿‡è®²è¿°æ‰©å±• <code class=\"language-text\">Table</code> ç»„ä»¶çš„å¦‚ä¸‹åŠŸèƒ½ï¼š</p>\n<ul>\n<li>âœ¨ æ¯ä¸ªå±‚çº§<strong>ç¼©è¿›æŒ‡ç¤ºçº¿</strong></li>\n<li>âœ¨ è¿œç¨‹<strong>æ‡’åŠ è½½</strong>å­èŠ‚ç‚¹</li>\n<li>âœ¨ æ¯ä¸ªå±‚çº§æ”¯æŒ<strong>åˆ†é¡µ</strong></li>\n</ul>\n<p>ä»¥åŠå¼€å‘è¿‡ç¨‹ä¸­å‡ºç°ä»£ç çš„è€¦åˆï¼Œéš¾ä»¥ç»´æŠ¤é—®é¢˜ï¼Œè¿›è€Œå»¶ä¼¸æ¢ç´¢<strong>æ’ä»¶æœºåˆ¶</strong>åœ¨ç»„ä»¶ä¸­çš„è®¾è®¡å’Œä½¿ç”¨ï¼Œè™½ç„¶æœ¬æ–‡è®¾è®¡çš„æ’ä»¶è¿˜æ˜¯æœ€ç®€é™‹çš„ç‰ˆæœ¬ï¼Œä½†æ˜¯åŸç†å¤§è‡´ä¸Šå¦‚æ­¤ï¼Œå¸Œæœ›èƒ½å¤Ÿå¯¹ä½ æœ‰æ‰€å¯å‘ã€‚</p>\n<p>ä»£ç å·²ç»å‘å¸ƒåœ¨ <a href=\"https://github.com/sl1673495/react-antd-treetable\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">react-antd-treetable</a>ï¼Œæ¬¢è¿ Star~</p>\n<h2 id=\"æ„Ÿè°¢å¤§å®¶\"><a href=\"#%E6%84%9F%E8%B0%A2%E5%A4%A7%E5%AE%B6\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>æ„Ÿè°¢å¤§å®¶</h2>\n<p>æ¬¢è¿å…³æ³¨ sshï¼Œå‰ç«¯æ½®æµè¶‹åŠ¿ã€åŸåˆ›é¢è¯•çƒ­ç‚¹æ–‡ç« åº”æœ‰å°½æœ‰ã€‚</p>\n<p>è®°å¾—å…³æ³¨ååŠ æˆ‘å¥½å‹ï¼Œæˆ‘ä¼šä¸å®šæœŸåˆ†äº«å‰ç«¯çŸ¥è¯†ï¼Œè¡Œä¸šä¿¡æ¯ã€‚2021 é™ªä½ ä¸€èµ·åº¦è¿‡ã€‚</p>\n<p><img src=\"https://user-images.githubusercontent.com/23615778/108619258-76929d80-745e-11eb-90bf-023abec85d80.png\" alt=\"image\"></p>","timeToRead":8,"frontmatter":{"title":"å¦‚ä½•ç¼–å†™ç¥å¥‡çš„ã€Œæ’ä»¶æœºåˆ¶ã€ï¼Œä¼˜åŒ–åŸºäº Antd Table å°è£…è¡¨æ ¼çš„æ··ä¹±ä»£ç ","date":"March 02, 2021","spoiler":""},"fields":{"slug":"/819971559/","langKey":"en"}}},"pageContext":{"slug":"/819971559/","previous":{"fields":{"slug":"/818779553/","langKey":"en","directoryName":"818779553"},"frontmatter":{"title":"ç»™  Antd Table ç»„ä»¶ç¼–å†™ç¼©è¿›æŒ‡å¼•çº¿ã€å­èŠ‚ç‚¹æ‡’åŠ è½½ç­‰åŠŸèƒ½"}},"next":null,"translations":[],"translatedLinks":[]}},"staticQueryHashes":["336482444"]}